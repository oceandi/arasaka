{% extends 'base.html' %}

{% block content %}
<style>
    .sidebar-menu {
        position: fixed;
        left: 0;
        top: 0;
        width: 240px;
        height: 100vh;
        background-color: #0f172a;
        padding: 20px 0;
    }
    
    .sidebar-menu ul {
        list-style: none;
        padding: 0;
    }
    
    .sidebar-menu li {
        margin-bottom: 5px;
    }
    
    .sidebar-menu a {
        display: flex;
        align-items: center;
        color: #f8fafc;
        text-decoration: none;
        padding: 12px 20px;
        font-size: 14px;
        transition: background-color 0.3s;
    }
    
    .sidebar-menu a:hover {
        background-color: rgba(59, 130, 246, 0.1);
        border-left: 3px solid #3b82f6;
    }
    
    .sidebar-menu a i {
        margin-right: 10px;
        font-size: 18px;
        width: 24px;
        text-align: center;
    }
    
    .main-content {
        margin-left: 240px;
        padding: 20px;
    }
</style>

<div class="sidebar-menu">
    <ul>
        <li><a href="/browse"><i class="fas fa-chart-line"></i> Dashboard</a></li>
        <li><a href="#"><i class="fas fa-map-marked-alt"></i> Harita Görünümü</a></li>
        <li><a href="#"><i class="fas fa-network-wired"></i> Fiber Arızalar</a></li>
        <li><a href="/deplase_islah"><i class="fas fa-tools"></i> Deplase Islah Kablo Upgrade</a></li>
        <li><a href="#"><i class="fas fa-money-check-alt"></i> Hasar Tazmin</a></li>
        <li><a href="/fttb_optimizasyon"><i class="fas fa-building"></i> FTTB Optimizasyon</a></li>
        <li><a href="/kritik_modernizasyon"><i class="fas fa-sync-alt"></i> Kritik Modernizasyon</a></li>
        <li><a href="#"><i class="fas fa-download"></i> Raporlar</a></li>
    </ul>
</div>

<div class="main-content">
    <div class="container mt-4">
        <h2>Dashboard</h2>
        <div class="mb-3">
            <strong>Toplam Kayıt:</strong> {{ total }}<br>
            <strong>Eksik Bilgili Kayıt:</strong> {{ incomplete }}
        </div>
        <h4>Son 10 Kayıt</h4>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Bülten No</th>
                    <th>Hafta</th>
                    <th>Bölge</th>
                    <th>İl</th>
                    <th>Güzergah</th>
                    <th>Lokasyon</th>
                    <th>Başlangıç</th>
                    <th>Bitiş</th>
                    <th>İşlem</th>
                </tr>
            </thead>
            <tbody>
                {% for ariza in arizalar %}
                <tr>
                    <td>{{ ariza.bulten_no }}</td>
                    <td>{{ ariza.hafta }}</td>
                    <td>{{ ariza.bolge }}</td>
                    <td>{{ ariza.il }}</td>
                    <td>{{ ariza.guzergah }}</td>
                    <td>{{ ariza.lokasyon }}</td>
                    <td>{{ ariza.ariza_baslangic }}</td>
                    <td>{{ ariza.ariza_bitis }}</td>
                    <td>
                        <form action="{{ url_for('delete_ariza', id=ariza.id) }}" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Silinsin mi?')">Sil</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}